<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-control" content="public">
    <meta http-equiv="max-age" content="864000">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/dest/css/main.css">
    <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
    <script src="/dest/js/main.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/monokai-sublime.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad()</script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-166944924-1"></script>
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() { dataLayer.push(arguments) }
      gtag('js', new Date())
      gtag('config', 'UA-166944924-1')
    </script>
    <meta content="100002164450594" property="fb:admins">
    <meta content="722056048603698" property="fb:app_id"><!---->    

<meta name="author" content="Berglas">
<meta name="copyright" content="Berglas">
<meta name="description" content="最近因為工作需求，要在Windows系統上架設安裝SFTP(SSH File Transfer Protocol)Server，所以在此記錄一下怎麼架設與設定，以免忘記之餘也順便分享給有需要的朋友們。">
<meta itemprop="name" content="在Windows 10架設SFTP(SSH Server)｜巴格.生活日記•學習筆記">
<meta itemprop="image" content="https://berglas.github.io/dest/articles/2020/7/note_SFTP_setting_1.jpg">
<meta itemprop="description" content="最近因為工作需求，要在Windows系統上架設安裝SFTP(SSH File Transfer Protocol)Server，所以在此記錄一下怎麼架設與設定，以免忘記之餘也順便分享給有需要的朋友們。">
<meta property="og:title" content="在Windows 10架設SFTP(SSH Server)｜巴格.生活日記•學習筆記">
<meta property="og:url" content="https://berglas.github.io/dest/articles/2020/7/note_SFTP_setting_1.html">
<meta property="og:image" content="https://berglas.github.io/dest/articles/2020/7/note_SFTP_setting_1.jpg">
<meta property="og:description" content="最近因為工作需求，要在Windows系統上架設安裝SFTP(SSH File Transfer Protocol)Server，所以在此記錄一下怎麼架設與設定，以免忘記之餘也順便分享給有需要的朋友們。">
<meta property="og:site_name" content="巴格.生活日記•學習筆記">
<meta property="og:type" content="article">
<title>在Windows 10架設SFTP(SSH Server)｜巴格.生活日記•學習筆記</title>

  </head>
  <body>
    <div class="header">
      <div class="logo" onclick="javascript:location.href=&quot;/&quot;"></div>
      <div class="title" onclick="javascript:location.href=&quot;/&quot;">
        <h1>巴格.生活日記•學習筆記</h1><span>- 取之於網路，用之於網路 -</span>
      </div>
      <ul class="menu-list">
        <li title="所有文章"><a href="/"> 
            <sapn>所有文章</sapn></a></li>
        <li title="關於這裡"><a href="/dest/articles/2020/4/origin.html"> 
            <sapn>關於這裡</sapn></a></li>
        <li class="list" title="聯絡我"><a href="/resume.html"> 
            <sapn>聯絡我</sapn></a></li>
      </ul>
    </div>
    <div class="container">
      <div class="float-box">
        <h2>筆記重點</h2>
        <div class="outline-box">
          <ul></ul>
        </div>
      </div>
      <div class="content">
        <main>
          <div class="title-box"><!----> 

<p class='theme-title'>在Windows 10架設SFTP(SSH Server)</p>
<p class='time-mark'>2020-07-31</p>

          </div>
          <div class="depiction-box"><!----> 

<p><img src="./HlhMxS2.jpg" alt=""></p>
<p class='depiction'>最近因為工作需求，要在Windows系統上架設安裝SFTP(SSH File Transfer Protocol)Server，所以在此記錄一下怎麼架設與設定，以免忘記之餘也順便分享給有需要的朋友們。</p>

          </div><!----> 

<h3>前言</h3>
<p>SFTP全名為SSH File Transfer Protocol，中文翻譯「安全檔案傳送協定」，是一種資料流連線，提供檔案存取、傳輸和管理功能的網路傳輸協定。由網際網路工程任務組（IETF）設計，透過SSH 2.0 的擴充提供安全檔案傳輸能力<a href="https://zh.wikipedia.org/wiki/SSH%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE">[註]</a>。
因為多了這種安全協定的認證，所以SFTP在傳輸上效率比FTP低，但很適用於需要高安全性傳輸上。</p>
<p>在Windows 10裡，官方已經推出內建擴充的應用方式「OpenSSH」所以接下來將會使用這套來做SSH Server的架設。</p>
<h3>安裝OpenSSH</h3>
<ol>

<li>
進入Windows 設定 

<p><img src="./yjir6pW.png" alt=""></p>
</li>
<li>
進入應用程式

<p><img src="./qJ2JMnm.png" alt=""></p>
</li>
<li>
選用功能

<p><img src="./tkNjVdV.png" alt=""></p>
</li>
<li>
新增功能

<p><img src="./Vuwol1i.png" alt=""></p>
</li>
<li>
OpenSSH 伺服器(點選安裝)

<p><img src="./zkqj9vj.png" alt=""></p>
</li>
<li>
返回上一頁(等待安裝完畢)

<p><img src="./hFj6UDt.png" alt=""></p>
</li>
<li>
安裝完成後請重新啟動電腦(重開機)。
</li>
</ol>

<h3>啟動服務</h3>
<ol>

<li>
以系統管理員身分啟動PowerShell。

<p><img src="./rutDVgs.png" alt=""></p>
</li>

<li>
啟動「OpenSSH SSH Server」服務，在終端機輸入指令：

<pre><code>Start-Service sshd</code></pre></li>
<li>
將「OpenSSH SSH Server」服務設為自動啟用(建議但非必要)，在終端機輸入指令：

<pre><code>Set-Service -Name sshd -StartupType &#39;Automatic&#39;</code></pre><p><img src="./BqYSNzK.png" alt=""></p>
</li>
<li>
確認當前防火牆規則，指令如下：

<pre><code>Get-NetFirewallRule -Name *ssh*</code></pre><p><img src="./sSVe4wW.png" alt=""></p>
</li>
<li>
新建立防火牆規則指令如下：

<pre><code>New-NetFirewallRule -Name sshd -DisplayName &#39;OpenSSH Server (sshd)&#39; -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22</code></pre><p><img src="./JxyBFIO.png" alt=""></p>
</li>
這樣Server就啟動完成了，現在測試看看。
</ol>

<h3>測試</h3>
<p>開啟命令提示字元，在內輸入：</p>
<pre><code>ssh username@servername </code></pre><p>username：電腦使用者帳號，servername：電腦IP</p>
<p>連線時會要你輸入密碼，密碼為電腦使用者的密碼，輸入時會沒有任何反應是正常的，為了保密。</p>
<p>第一次連線到伺服器時，應該會看到類似下列的訊息：</p>
<pre><code>The authenticity of host &#39;servername (10.00.00.001)&#39; can&#39;t be established.
ECDSA key fingerprint is SHA256:(&lt;a large string&gt;).
Are you sure you want to continue connecting (yes/no)?</code></pre><p>這邊輸入<code>yes</code></p>
<p><img src="./AM3S5rj.png" alt=""></p>
<p>由於這我ftpUser這使用者有設定讀取權限，所以我用另外一組連線，取得成功畫面供參考，
連線成功後會看到類似下方的標頭，這時候就可以輸入<code>dir</code>去觀看路徑內的檔案了。</p>
<pre><code>domain\username@SERVERNAME C:\Users\username&gt;</code></pre><p><img src="./0I3Nch5.png" alt=""></p>
<p>大功告成囉~</p>
<h3>總結</h3>
<p>在Windows 10裡已經內建OpenSSH擴充服務，不用在像之前依靠第三方軟體去設定，在安裝的過程也沒遭遇到太多問題跟困難，因為官方就有設定文件了，個人覺得快速便利，如果有需要的朋友可以參考，也請各前輩可以留言討論更好的方法來跟大家一起分享。</p>
<p>下篇會來講怎麼設定使用者對於檔案(路徑)的權限管理。</p>

        </main>
      </div>
      <div class="comments-box">
        <div id="fb-root"></div>
        <script async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&amp;version=v7.0&amp;appId=722056048603698&amp;autoLogAppEvents=1"></script>
        <div class="fb-comments" data-numposts="5" data-width="100%"></div>
      </div>
      <div class="footer">
        <div class="license"></div>
      </div>
    </div>
  </body>
</html>